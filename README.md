# makepub

Makes an EPub file out of an RSS OPML. Each RSS feed is added as a chapter in the EPub file. The title of the chapter is the title of the feed. The articles of each RSS feed is added as a chapter with a summary generated using the OpenAI GPT-3 API.

## Setup

Uses the [OPML format](https://en.wikipedia.org/wiki/OPML) that many RSS readers can export. A sample file, `sample_feeds.opml` is provided in the repo. To use it, rename (or copy) it to `feeds.opml`. You can directly edit the file.

You also need to set the `OPENAI_API_KEY` environment variable to your OpenAI API key. Or set it in a file named '.env' in the same directory as the script.

Before running, you will also need to install the required Python packages. I highly suggest using a venv to avoid conflicts with other Python packages.

```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

## Usage

```bash
python makepub.py
```

This will create an EPub file in the same directory. The name of the file is based on the title in the `feeds.opml` file with the current date appended. For example, `Makepub Feeds - April 3, 2024.epub`. You can open this file in any EPub reader.

## Notes

The script caches the summaries generated by the OpenAI API in the `cache` directory. This is to avoid making the same API call multiple times. If you want to regenerate the summaries, you can delete the files. Files are named based on the hash of the URL.

Some articles cannot be fetched for various reasons -- typically blocking by the server. The script will skip these articles and continue with the next one.

Some articles are too long and the current approach to shortening the content is not very robust. This is a work in progress.
